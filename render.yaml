# Render Blueprint for Testudo Crawler
# This file enables one-click deployment to Render
# Documentation: https://render.com/docs/blueprint-spec

services:
  - type: web
    name: testudo-watchdog
    env: python
    region: oregon  # Choose your preferred region
    plan: free  # Free tier
    branch: main  # Deploy from main branch

    # Build configuration - use external script
    buildCommand: ./build.sh

    # Start command - runs the FastAPI web service
    startCommand: python -m uvicorn app.web:app --host 0.0.0.0 --port 10000

    # Health check configuration
    healthCheckPath: /health

    # Environment variables
    # IMPORTANT: You must set secret values in the Render dashboard
    envVars:
      - key: PORT
        value: 10000

      - key: AI_PROVIDER
        value: openai  # Change to 'anthropic' if preferred

      - key: OPENAI_API_KEY
        sync: false  # Must be set manually in Render dashboard

      - key: OPENAI_MODEL
        value: gpt-4o-mini

      - key: ANTHROPIC_API_KEY
        sync: false  # Only required if AI_PROVIDER=anthropic

      - key: ANTHROPIC_MODEL
        value: claude-3-haiku-20240307

      - key: TELEGRAM_BOT_TOKEN
        sync: false  # Must be set manually in Render dashboard

      - key: TELEGRAM_CHAT_ID
        sync: false  # Must be set manually in Render dashboard

      - key: SCRAPER_TIMEOUT
        value: 30

      - key: LOGFIRE_TOKEN
        sync: false  # Optional: set if you want Logfire observability
